<mvc:View xmlns:actiontoolbar="sap.ui.mdc.actiontoolbar" xmlns:mdc="sap.ui.mdc"
    controllerName="qaservicefreestyleodatav4.controller.Boards"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f">

    <Page id="page" title="{i18n>title}">
        <f:FlexibleColumnLayout layout="TwoColumnsMidExpanded">
            <f:beginColumnPages>
                <FlexBox width="100%" direction="Column">
                    <FlexBox class="sapUiResponsiveContentPadding" height="50%" width="100%" direction="Column">
                        <ScrollContainer height="100%" width="100%" vertical="true" horizontal="false" focusable="true">
                            <List
                                id="topicsList"
                                mode="SingleSelectMaster"
                                width="100%" 
                                items="{/Topics}"
                                selectionChange=".onTopicSelect"
                                sticky="HeaderToolbar,InfoToolbar">

                                <headerToolbar>
                                    <OverflowToolbar >
                                        <Title text="Topics" />
                                        <ToolbarSpacer />
                                        <Button visible="{app>/selectedTopic/selected}" icon="sap-icon://reset" press=".onTopicsReset" />
                                    </OverflowToolbar>
                                </headerToolbar>

                                <infoToolbar>
                                    <Toolbar >
                                        <Text text="Selected: {app>/selectedTopic/name}" />
                                        <ToolbarSpacer />
                                        <Button visible="{= ! ${app>/selectedTopic/selected} }" icon="sap-icon://add" press=".onTopicCreate" />
                                        <Button visible="{app>/selectedTopic/selected}" type="Reject" icon="sap-icon://delete" press=".onTopicDelete" />
                                    </Toolbar>
                                    
                                </infoToolbar>

                                <StandardListItem type="Active" title="{name}" />    
                            </List>
                        </ScrollContainer>
                        <mdc:ActionToolbar ></mdc:ActionToolbar>
                    </FlexBox>

                    <FlexBox class="sapUiResponsiveContentPadding" height="50%" width="100%" direction="Column">
                        <ScrollContainer height="100%" width="100%" vertical="true" horizontal="false">
                            <List
                                id="groupsList"
                                mode="SingleSelectMaster"
                                selectionChange=".onGroupSelect"
                                width="100%"
                                items="{groups}" 
                                sticky="HeaderToolbar,InfoToolbar">

                                <headerToolbar>
                                    <OverflowToolbar >
                                        <Title text="{name} Groups" />
                                        <ToolbarSpacer />
                                        <Button visible="{app>/selectedGroup/selected}" icon="sap-icon://reset" press=".onGroupsReset" />
                                    </OverflowToolbar>
                                </headerToolbar>

                                <infoToolbar>
                                    <OverflowToolbar >
                                        <Text text="Selected: {app>/selectedGroup/name}" />

                                        <ToolbarSpacer />
                                        <Button visible="{= !${app>/selectedGroup/selected} &amp;&amp; ${app>/selectedTopic/selected} }" icon="sap-icon://add" press=".onGroupCreate" />
                                        <Button visible="{app>/selectedGroup/selected}" type="Reject" icon="sap-icon://delete" press=".onGroupDelete" />
                                    </OverflowToolbar>
                                </infoToolbar>

                                <StandardListItem type="Active" title="{name}" />
                            </List>
                        </ScrollContainer>
                    </FlexBox>
                </FlexBox>
            </f:beginColumnPages>

            <f:midColumnPages>
                <FlexBox direction="Column" width="100%">
                    <FlexBox class="sapUiResponsiveContentPadding" direction="Column" height="calc(100% - 150px)" width="100%">
                        <ScrollContainer
                            height="100%"
                            width="100%"
                            vertical="true"
                            horizontal="false">
                            
                            <List 
                                id="questionsList"
                                mode="SingleSelectMaster"
                                selectionChange="onQuestionSelect"
                                growing="true"
                                growingThreshold="3"
                                growingScrollToLoad="true"
                                items="{}"
                                width="100%"
                                sticky="HeaderToolbar,InfoToolbar">

                                <headerToolbar>
                                    <OverflowToolbar >
                                        <Title text="Questions" />
                                        <Title text="{app>/selectedTopic/name}" />
                                        <Title class="sapUiSmallMarginLeft" text="{app>/selectedGroup/name}" />

                                        <ToolbarSpacer />
                                        <Button visible="{app>/selectedQuestion/selected}" icon="sap-icon://reset" press=".onQuestionsReset" />
                                    </OverflowToolbar>
                                </headerToolbar>

                                <infoToolbar>
                                    <OverflowToolbar >
                                        <Title text="Selected: {app>/selectedQuestion/id}" />
                                        <ToolbarSpacer />

                                        <Button visible="{= !${app>/selectedQuestion/selected} &amp;&amp; ${app>/selectedGroup/selected}}" icon="sap-icon://add" press=".onQuestionCreate" />
                                        <Button visible="{app>/selectedQuestion/selected}" type="Reject" icon="sap-icon://delete" press=".onQuestionDelete" />
                                    </OverflowToolbar>
                                </infoToolbar>

                                <StandardListItem 
                                    title="{ID}" 
                                    description="{text}"
                                    wrapping="true"
                                    counter="{difficulty/numeric}" 
                                    adaptTitleSize="true"
                                    type="Active"
                                    highlight="{
                                        path: 'difficulty/numeric',
                                        formatter: '.formatHighlight'
                                    }" />
                            </List>
                        </ScrollContainer>
                    </FlexBox>

                    <FlexBox class="sapUiResponsiveContentPadding" direction="Column" height="150px" width="100%">
                        <FlexBox justifyContent="SpaceBetween" alignItems="Center">
                            <Title text="Answer" />
                            <FlexBox>
                                <Button enabled="{app>/selectedQuestion/selected}" visible="{= !${app>/editMode}}" icon="sap-icon://edit" press=".onAnswerEdit" />
                                <Button class="sapUiSmallMarginEnd" visible="{app>/editMode}" icon="sap-icon://cancel" press=".onCancelEdit" />
                                <Button visible="{app>/editMode}" type="Accept" icon="sap-icon://save" press=".onSaveAnswer" />
                            </FlexBox>
                        </FlexBox>

                        <TextArea id="answerArea" enabled="{app>/editMode}" width="100%" rows="3" value="{
                            path: 'answer',
                            $$updateGroupId: 'questionAnswer'
                        }" />
                    </FlexBox>
                </FlexBox>
            </f:midColumnPages>
        </f:FlexibleColumnLayout>
    </Page>
</mvc:View>
