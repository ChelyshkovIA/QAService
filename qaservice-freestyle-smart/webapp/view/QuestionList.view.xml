<mvc:View
    controllerName="qaservicefreestylesmart.controller.QuestionList"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar">
    <Page id="page" title="Smart Table testing">
        <VBox>
            <smartFilterBar:SmartFilterBar
                id="smartFilterBar"
                entitySet="Questions"
                enableBasicSearch="true" />

            <VBox class="sapUiSmallMargin">
                <HBox>
                    <CheckBox text="editTogglable" selected="{appModel>/editTogglable}" />
                </HBox>
                <HBox>
                    <Button class="sapUiSmallMarginEnd" text="rebindTable" press=".onRebind" />
                    <Button text="rebindTableForce" press=".onRebindForce" />
                </HBox>
            </VBox>

            <smartTable:SmartTable 
                id="questionsSmartTable"
                smartFilterId="smartFilterBar"
                entitySet="Questions"
                header="Questions List"
                enableAutoBinding="true"
                editTogglable="{appModel>/editTogglable}"
                app:useSmartToggle="true"
                tableType="ResponsiveTable"
                initiallyVisibleFields="ID,text,topic_ID,group_ID"
                requestAtLeastFields="difficulty_ID"
                ignoredFields="progress_ID">
                <Table>
                    <columns>
                        <Column>
                            <customData>
                                <core:CustomData key="p13nData" value='\{
                                    "columnKey": "customDifficulty",
                                    "leadingProperty": "difficulty/numeric",
                                    "sortProperty": "difficulty/numeric",
                                    "filterProperty": "difficulty/name",
                                    "columnIndex" : "3"
                                }'/>
                            </customData>
                            <Text text="Custom Difficulty" />
                        </Column>
                        <Column>
                            <customData>
                                <core:CustomData key="p13nData" value='\{
                                    "columnKey": "groupName",
                                    "leadingProperty": "group/name",
                                    "sortProperty": "group/name",
                                    "filterProperty": "group/name",
                                    "columnIndex" : "4"
                                }'/>
                            </customData>
                            <Text text="Custom Group" />
                        </Column>
                    </columns>

                    <items>
                        <ColumnListItem>
                            <ObjectStatus
                                text="{
                                    path: 'difficulty/ID',
                                    formatter: '.formatter.formatDifficultyText'
                                }"
                                state="{
                                    path: 'difficulty/ID',
                                    formatter: '.formatter.formatDifficultyState'
                                }"
                            ></ObjectStatus>
                            <Text text="{group/name}" />
                        </ColumnListItem>
                    </items>
                </Table>
            </smartTable:SmartTable>
        </VBox>
    </Page>
</mvc:View>
